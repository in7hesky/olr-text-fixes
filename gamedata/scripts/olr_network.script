--hi_flyer 10/05/16

local text_mess_fnc = ""
local text_mess_add = ""
local text_mess = ""
local last_info_in_table = "news_info_unicq_36"
local time_apdeyta_news = 0
local timerupnews = math.random(250000,2000000) -- частота апдейта  400000,750000
local text_phrases = 

{               

{"В гаражах три человека засело... Всем осторожнее, похоже это бандюки опять за старое взялись.", "news_info_unicq_1", "", "nick.garage_tri_bandosa()"},

{"Недавно на блокпосте взяли курьера Бармена с товаром... Вобщем, лакомый кусочек - ящик с артефактами, где-то у командира поста лежит... Так, что если кому жить надоело - может рискнуть.", "news_info_unicq_2", "", "" },

{"Всем внимание. На север от моста на заставе, метрах в 100 за брошенным БТРом наткнулся на скопление электр... Кому инфа пригодится, с того пиво.", "news_info_unicq_3", "", ""  },

{"Народ, вояки опять возобновили патруль под разрушенным мостом на заставе. И вроде снайпер ихний там засел... рассмотреть где не успел – пришлось оттуда сматывать...", "news_info_unicq_4", "Да вроде нет никого...", ""  },

{"Всем прием... На заводе на заставе опять бандюки обосновались. Хабар у сталкеров отбирают... Кто там поблизости из опытных пугните тварей... За мной не заржавеет.", "news_info_unicq_5", "", "nick.garage_tri_bandosa()"  },

{"К востоку от моста на заставе видел стаю собак в 20-30 штыков... Так что делайте выводы, господа... ", "news_info_unicq_6", "", "" },

{"Господа сталкеры... Срочно нужен Магнит... Плачу приличные бабки... Говорят на заставе с прошлого Выброса один до сих пор есть...", "news_info_unicq_7", "", ""  },

{"...Васька говорит еще один меченый появился, только от торговца ушел. Ты знаешь, что делать...", "news_info_unicq_8", "Слышал на болотах видели такого-же...", ""  },

{"Федьку Черного кто-то пристрелил в гаражах... Чую, блин, опять бандиты появились.", "news_info_unicq_9", "", "nick.garage_fedka_bandosi()"  },

{"Не суйтесь в Темную Долину, оттуда щас лезут зомбаки, толпами... Берегите патроны, млин. Давно уже пора было зачистить долину. И куда только Долг смотрит?", "news_info_unicq_10", "", "nick.garage_zombi_from_doliana()"},

{"Кажись только, что на свалке видел несколько боевиков из Долга. Интересно, за кем они пришли?", "news_info_unicq_11", "", "nick.garage_dolg_from_doliana()"  },

{"...худо мне, ребята, зацепило таки меня. Если кто возле ржавого озера, подсобите, за мной не заржавеет... Вобщем, постараюсь сам выкарабкаться, а там посмотрим.", "news_info_unicq_12", "", ""  },

{"Стрелок вернулся! Только что от знающих людей услыхал... Из самого центра вернулся! Значит можно, значит, блин, скоро будем большой прорыв делать к центру, а там и посмотрим кто кого...", "news_info_unicq_13", "", ""  },

{"Всем прием... Братва, на блокпост не суйтесь.. Какие-то придурки напали на патруль... Вобщем там сейчас горячо... Наверняка опять карательный рейд будет.", "news_info_unicq_14", "Не ври.. всё тихо там.", "", ""  },

{"Я на Свалке, тут дофига слепых псов набежало... Похоже из центра пришли новые стаи, всем быть осторожнее.", "news_info_unicq_15", "", ""  },

{"Всем аккуратнее. Похоже что тут всерьез и надолго обосновались военные. База у них расположена в здании института. Видел несколько десятков человек и снайпера на крыше.", "news_info_unicq_16", "", ""  },

{"Подслушал из разговора патрульных, что военные все что найдут собирают на третьем этаже в здании института. Есть есть желающие рискнуть ради наживы - попробуйте пробраться.", "news_info_unicq_17", "", "" },

{"Слышал на заводе по ночам ходит кто-то... по чердаку.. Когда рядом проходил, видел через дыру в крыше силуэт, метра два ростом... Вообще говорят что место это такое.. будто неудачи постигнут того кто там побывает...", "news_info_unicq_18", "", "" },

{"На НИИ видел учёного какого-то, в оранжевом комбинезоне... У болота с банками какими-то тёрся... Какого им там нужно? Там же фонит..", "news_info_unicq_19", "", "" },

{"У Жабы опять хавчик кончился... или зажал... Придётся опять крыс да ворон гонять...", "news_info_unicq_20", "Гоняй - гоняй, потренируешься в меткости...", "", "" },

{"В Баре говорят новички какие-то обосновались... уже неделю там торчат не просыхая... Ха, нужно будет глянуть.", "news_info_unicq_21", "Алкашня обычная, что с них взять...", "", "" },

{"Что за хрень? Пришёл в нычку свою за артами, а там ничего нет! Чёрт, наверное выброс поглотил последний...", "news_info_unicq_22", "", "" },

{"Хм, а зомбаки то оказывается настолько разложились, что от мощного взрыва могут на части разлететься! Прямо как от аномалии!", "news_info_unicq_23", "", "" },

{"Видел на свалке со стороны долины шёл квад вояк... всем быть на чеку.", "news_info_unicq_24", "Тикай оттуда, придурок.", "" },

{"Народ, в Баре, что за хата заколоченная стоит? Неплохо было бы там обосноваться..", "news_info_unicq_25", "Я слышал там подох кто-то, давно ещё...", "", "" },

{"В одном из туннелёй на свалке заметил что-то шипастое, вроде как артефакт, но рукой не достать явно...", "news_info_unicq_26", "", "" },

{"Мужики, выручайте! Сунулся в какой-то комплекс в Тёмной Долине, а за мной дверь закрылась.", "news_info_unicq_27", "Мужик, прости за правду-матушку, но.... Хана тебе.", "", "" },

{"Слышьте, если есть кто в Тёмной Долине, то уйдите с дороги, а не то собьют ещё. Только что мимо меня грузовик проехал. Судя по всему, очередная труповозка с Севера.", "news_info_unicq_28", "Блин, да откуда они вообще берутся? Кто-нибудь знает?", "", ""},                                        

{"Говорят, новичок какой-то к Жабе иногда по ночам заваливается странный... При этом сам Жаба в дальнюю комнату к себе уходит, а он там у него стоит всю ночь, и молчит.. Хех, видимо облапошил торагаш парня по самое нехочу, что у того аж крыша поехала...", "news_info_unicq_29", "Да кто его знает, блин.. всё может быть.", "", "" },

{"Блин, ночевал вчера в Светлом Луче в одной из хрущёвок, так откуда ни возьмись плоть занесло.. прям ко мне в ночлежку. И что странно, походила по комнатам немного, понюхала, и что то нашептывала про себя... наверное перепил вчера в баре я...", "news_info_unicq_30", "", ""},

{"Кто нибудь видел зомбаков без головы? Я сам нет, но говорят есть и такие... Как при этом они вообще могут существовать?", "news_info_unicq_31", "Сходи на озеро к учёным, узнаешь.", "", ""},

{"Народ, что с радиоактивными обломками делать? Слышал их покупает кто-то на севере, но как тащить, они же так фонят, аж светятся!", "news_info_unicq_32", "Купи капсулу R1 у торгашей, туда и ложи. Что за новички пошли...", "", ""},

{"Блин, чуваки.. тут на свалке бандюки с долгом схлестнулись... это надо видеть. На блокпосту ихнем.", "news_info_unicq_33", "Опа.. сейчас хабар в нычку скину, и прийду.", "", ""},

{"Чёрт, проколол шину на горбатом, и похоже трансмиссия полетела - не едет и всё тут... придётся двоих на своих прогуляться.", "news_info_unicq_34", "Ну ты и лох...", "", ""},

{"Видел ночью как Бармен уходил в свою закрытую комнату, а там целый арсенал у него. На стене прям висит куча волын. Вот бы добраться туда..", "news_info_unicq_35", "В Бар можешь больше не приходить. Охранник.", "", ""},

{"Куплю пару банок под студень. Слышал можно набирать его, концентрат сделать.", "news_info_unicq_36", "Ты к Ведьмаку подойди, он кажется этим занимается.", "", ""}

}


function update()
if db.actor then
	if time_global() > time_apdeyta_news then
		time_apdeyta_news = time_global() + timerupnews
		if device().precache_frame >1 then return end
  		if nick.is_pda_dead() then
  			return 
  		end
			for key, val in ipairs(text_phrases) do
				if not has_alife_info(val[2]) then 
					db.actor:give_info_portion(val[2])
					text_mess = (val[1])
					if val[3] ~= nil then
						text_mess_add = (val[3])
					end
					if val[4] ~= nil then
						text_mess_fnc = (val[4])
						break
					end
				end
			end

			if has_alife_info(last_info_in_table) then
				--log1("VSE")
				return
			end

	if nick.is_pda_dead() then return end 

	local sactor = alife():actor()
	local cactor = level.object_by_id(sactor.id)
	local sactor2 = alife():actor()
	local cactor2 = level.object_by_id(sactor2.id)
	local news_text = "%c[255,245,118,54]"..text_mess..""
	cactor:give_game_news(news_text, "ui\\ui_iconsTotal",Frect():set(486,432,50,50),math.random(1000, 3000),15000)
	if text_mess_add ~= "" then
		local bol_var = math.random(1,2)
		if bol_var == 1 then
			local news_text_add = "%c[255,245,118,54]"..text_mess_add..""
			cactor2:give_game_news(news_text_add, "ui\\ui_iconsTotal",Frect():set(486,432,50,50),math.random(8000, 16000),10000)
		end
	end

	if text_mess_fnc ~= "" then
		local func = loadstring(text_mess_fnc)
		if func then
			pcall(func)
		end
	end

end		
end
end




